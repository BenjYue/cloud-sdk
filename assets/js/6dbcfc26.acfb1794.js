"use strict";(self.webpackChunksap_cloud_sdk_documentation=self.webpackChunksap_cloud_sdk_documentation||[]).push([[6381],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),p=u(n),m=l,k=p["".concat(s,".").concat(m)]||p[m]||c[m]||o;return n?a.createElement(k,i(i({ref:t},d),{},{components:n})):a.createElement(k,i({ref:t},d))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,i=new Array(o);i[0]=p;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:l,i[1]=r;for(var u=2;u<o;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},81447:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>u,toc:()=>c});var a=n(87462),l=(n(67294),n(3905)),o=n(74866),i=n(85162);const r={id:"5.0-upgrade-steps",title:"Steps to update to Version 5 of the SAP Cloud SDK",hide_title:!1,hide_table_of_contents:!1,sidebar_label:"Update Steps to Version 5",description:"Update your application to use version 5 of the SAP Cloud SDK",keywords:["sap","cloud","sdk","cloud native","cloud sdk","sap cloud sdk",5,"Update"]},s=void 0,u={unversionedId:"guides/5.0-upgrade-steps",id:"guides/5.0-upgrade-steps",title:"Steps to update to Version 5 of the SAP Cloud SDK",description:"Update your application to use version 5 of the SAP Cloud SDK",source:"@site/docs-java/guides/5.0-upgrade-steps.mdx",sourceDirName:"guides",slug:"/guides/5.0-upgrade-steps",permalink:"/cloud-sdk/docs/java/guides/5.0-upgrade-steps",draft:!1,editUrl:"https://github.com/SAP/cloud-sdk/edit/main/docs-java/guides/5.0-upgrade-steps.mdx",tags:[],version:"current",frontMatter:{id:"5.0-upgrade-steps",title:"Steps to update to Version 5 of the SAP Cloud SDK",hide_title:!1,hide_table_of_contents:!1,sidebar_label:"Update Steps to Version 5",description:"Update your application to use version 5 of the SAP Cloud SDK",keywords:["sap","cloud","sdk","cloud native","cloud sdk","sap cloud sdk","5","Update"]},sidebar:"docsJavaSidebar",previous:{title:"Kubernetes with SAP Kyma",permalink:"/cloud-sdk/docs/java/environments/kubernetes-kyma"},next:{title:"Dependency Management",permalink:"/cloud-sdk/docs/java/guides/manage-dependencies"}},d={},c=[{value:"Before You Update",id:"before-you-update",level:2},{value:"Change Version of Your <code>sdk-bom</code> or <code>sdk-modules-bom</code>",id:"change-version-of-your-sdk-bom-or-sdk-modules-bom",level:2},{value:"Remove or Replace Modified Cloud SDK Dependencies",id:"remove-or-replace-modified-cloud-sdk-dependencies",level:2},{value:"Steps to migrate <code>Destination</code> usages",id:"steps-to-migrate-destination-usages",level:2},{value:"Remove or Replace Modified Cloud SDK APIs",id:"remove-or-replace-modified-cloud-sdk-apis",level:2},{value:"Generate and Use Your Own OData VDM",id:"generate-and-use-your-own-odata-vdm",level:2},{value:"Generate Your Own OData VDM",id:"generate-your-own-odata-vdm",level:3},{value:"Handle OData VDM Instantiation",id:"handle-odata-vdm-instantiation",level:3},{value:"Remove Discontinued ServletFilter from Your <code>web.xml</code>",id:"remove-discontinued-servletfilter-from-your-webxml",level:2},{value:"Auditlogging usage",id:"auditlogging-usage",level:2}],p={toc:c};function m(e){let{components:t,...r}=e;return(0,l.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Version 5 of the SAP Cloud SDK is here and we highly recommend updating to it as soon as possible.\nIt brings various improvements, it is now Open Source and the Destination API has been unified."),(0,l.kt)("admonition",{title:"Release Blog Post",type:"note"},(0,l.kt)("p",{parentName:"admonition"},"For more information also check out our version 5 release blog post")),(0,l.kt)("admonition",{title:"Minimum Java Version",type:"warning"},(0,l.kt)("p",{parentName:"admonition"},"Starting with version 5.0.0 the SAP Cloud SDK requires a Java version of at least 17.")),(0,l.kt)("admonition",{title:"WAR Deployment",type:"warning"},(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("inlineCode",{parentName:"p"},"war")," deployment in combination with the ",(0,l.kt)("strong",{parentName:"p"},"SAP Java Buildpack")," is currently ",(0,l.kt)("strong",{parentName:"p"},"not supported"),".\nAs a consequence, we are ",(0,l.kt)("strong",{parentName:"p"},"not releasing")," our ",(0,l.kt)("a",{parentName:"p",href:"https://search.maven.org/artifact/com.sap.cloud.sdk.s4hana/rfc"},(0,l.kt)("inlineCode",{parentName:"a"},"rfc")," artifact")," with the SAP Cloud SDK for Java in version 5 at the moment. ",(0,l.kt)("br",null),"\nSupport will come after the release of the upcoming SAP Java Buildpack 2.X",(0,l.kt)("br",null),"\nConsumers that need to use the RFC functionality (e.g. JCo) are requested to ",(0,l.kt)("strong",{parentName:"p"},"stay on version 4")," for now.")),(0,l.kt)("admonition",{title:"Minimum CAP version",type:"info"},(0,l.kt)("p",{parentName:"admonition"},"If you are using the Cloud Application Programming model (CAP) to build your application, please note that the SAP Cloud SDK version 5 requires a minimum CAP/CDS version of at least ",(0,l.kt)("inlineCode",{parentName:"p"},"2.4.0"),".\nIf you are on an older CAP stack, please follow the ",(0,l.kt)("a",{parentName:"p",href:"https://cap.cloud.sap/docs/java/migration#one-to-two"},"CAP migration guide")," first.")),(0,l.kt)("h2",{id:"before-you-update"},"Before You Update"),(0,l.kt)("p",null,"Before you increase the SAP Cloud SDK version to 5, it is recommended to first update to the latest available version of the SAP Cloud SDK 4 and migrate any usage of deprecated API. Follow the deprecation notes in the Javadocs to find recommended replacements. All deprecated APIs are removed with version 5."),(0,l.kt)("p",null,"Also, make sure that you are using Java 17 or higher. To setup your build to use Java 17 you can use ",(0,l.kt)("a",{parentName:"p",href:"https://www.baeldung.com/maven-java-version"},"this guide"),".\nAs Java EE modules have been removed from Java 11, you might also need to update your application to use the ",(0,l.kt)("a",{parentName:"p",href:"https://jakarta.ee/"},"Jakarta EE")," modules instead.\nThis JEP provides a good overview of the changes: ",(0,l.kt)("a",{parentName:"p",href:"https://openjdk.java.net/jeps/320"},"JEP 320: Remove the Java EE and CORBA Modules"),"."),(0,l.kt)("p",null,"If you are consuming SOAP APIs and are relying on the ",(0,l.kt)("inlineCode",{parentName:"p"},"axis2-wsdl2code-maven-plugin")," to generate classes, please also additionally include ",(0,l.kt)("inlineCode",{parentName:"p"},"javax.activation:activation")," artifact to your dependencies to avoid compilation errors."),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"We recommend to update your application in the following order:"),(0,l.kt)("ol",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ol"},"Make sure you use the latest Cloud SDK v4 version available."),(0,l.kt)("li",{parentName:"ol"},"Update your application to use Java 17."),(0,l.kt)("li",{parentName:"ol"},"Update your application to use the latest Cloud SDK v5 and Spring Boot/Spring version available."))),(0,l.kt)("h2",{id:"change-version-of-your-sdk-bom-or-sdk-modules-bom"},"Change Version of Your ",(0,l.kt)("inlineCode",{parentName:"h2"},"sdk-bom")," or ",(0,l.kt)("inlineCode",{parentName:"h2"},"sdk-modules-bom")),(0,l.kt)("p",null,"The first step is to change the version of the SAP Cloud SDK dependency in your ",(0,l.kt)("inlineCode",{parentName:"p"},"pom.xml")," file.\nDepending on your project setup you might use one of our BOMs or the individual modules."),(0,l.kt)("p",null,"To find our BOMs, search for the following entries in your maven ",(0,l.kt)("inlineCode",{parentName:"p"},"dependencyManagement")," section: ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.cloud.sdk:sdk-bom")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.cloud.sdk:sdk-modules-bom"),".\nUpdate them directly to version ",(0,l.kt)("inlineCode",{parentName:"p"},"5.0.0")," or the ",(0,l.kt)("a",{parentName:"p",href:"https://central.sonatype.com/artifact/com.sap.cloud.sdk/sdk-bom"},"latest version"),"."),(0,l.kt)("p",null,"If you are using ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.cloud.sdk:sdk-sjb-bom")," and produce a ",(0,l.kt)("inlineCode",{parentName:"p"},"war")," deployment (e.g. when you require JCo for your application) you will need to stay on the latest version 4 of the SAP Cloud SDK.\nIn the other cases you should replace it with one of the BOMs mentioned above."),(0,l.kt)("p",null,"If you are building on Spring or Spring Boot you should also update to the latest version of the respective BOMs, so ",(0,l.kt)("inlineCode",{parentName:"p"},"6.1.0")," (Spring) or ",(0,l.kt)("inlineCode",{parentName:"p"},"3.1.6")," (Spring Boot) as of the time of writing.\nThese BOMs should be listed after any SAP Cloud SDK related BOM, so for Spring Boot your ",(0,l.kt)("inlineCode",{parentName:"p"},"dependencyManagement")," section should look something like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencyManagement>\n    <dependencies>\n        <dependency>\n            <groupId>com.sap.cloud.sdk</groupId>\n            <artifactId>sdk-bom</artifactId>\n            <version>5.0.0</version> \x3c!-- TODO: replace this with the most recent version --\x3e\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-dependencies</artifactId>\n            <version>3.1.6</version> \x3c!-- TODO: replace this with the most recent version --\x3e\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n")),(0,l.kt)("p",null,"At the same time you should also replace usages of ",(0,l.kt)("inlineCode",{parentName:"p"},"javax")," dependencies with the respective ",(0,l.kt)("inlineCode",{parentName:"p"},"jakarta")," dependency.\nAs we only provide a managed version for ",(0,l.kt)("inlineCode",{parentName:"p"},"jakarta.servlet-api")," in our BOM, you will need to add the formerly managed version for the ",(0,l.kt)("inlineCode",{parentName:"p"},"jakarta.inject-api")," dependency manually:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-diff"},"-<dependency>\n-    <groupId>javax.inject</groupId>\n-    <artifactId>javax.inject</artifactId>\n-</dependency>\n+<dependency>\n+    <groupId>jakarta.inject</groupId>\n+    <artifactId>jakarta.inject-api</artifactId>\n+    <version>2.0.1</version>\n+</dependency>\n")),(0,l.kt)("p",null,"Also remember to migrate all your dependencies to their respective ",(0,l.kt)("inlineCode",{parentName:"p"},"jakarta")," versions if applicable."),(0,l.kt)("p",null,"For example, if you were previously using ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.hcp.cf.logging:cf-java-logging-support-servlet")," for application logging you must instead switch to using ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.hcp.cf.logging:cf-java-logging-support-servlet-jakarta"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-diff"},"-<dependency>\n-    <groupId>com.sap.hcp.cf.logging</groupId>\n-    <artifactId>cf-java-logging-support-servlet</artifactId>\n-</dependency>\n+<dependency>\n+    <groupId>com.sap.hcp.cf.logging</groupId>\n+    <artifactId>cf-java-logging-support-servlet-jakarta</artifactId>\n+    <version>latest-lib-version</version>\n+</dependency>\n")),(0,l.kt)("details",null,(0,l.kt)("summary",null,"For projects that were already upgraded to Java 17 and Spring Boot 3 in SDK 4"),(0,l.kt)("p",null,"Please remove any workarounds that were needed to make Java 17 and Spring Boot 3 work with SDK 4:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"When using the ",(0,l.kt)("inlineCode",{parentName:"li"},"scp-cf")," module or its replacement ",(0,l.kt)("inlineCode",{parentName:"li"},"sdk-core"),", please remove the ",(0,l.kt)("inlineCode",{parentName:"li"},"servlet-jakarta")," module."),(0,l.kt)("li",{parentName:"ul"},"When using the ",(0,l.kt)("inlineCode",{parentName:"li"},"@ServletComponentScan")," annotation, please update the namespace back to:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-diff"},'- @ServletComponentScan({"com.sap.cloud.sdk.cloudplatform.servletjakarta", ...\n+ @ServletComponentScan({"com.sap.cloud.sdk", ...\n'))),(0,l.kt)("h2",{id:"remove-or-replace-modified-cloud-sdk-dependencies"},"Remove or Replace Modified Cloud SDK Dependencies"),(0,l.kt)("p",null,"The lists below contains all modules that have been renamed or removed from the SDK.\nTherefore, you should also rename respectively remove those from your project setup."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Full list of renamed or replaced modules"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Module ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.frameworks:resilience4j")," has been moved to ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:resilience4j")),(0,l.kt)("li",{parentName:"ul"},"Module ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.frameworks:apache-httpclient5")," has been moved to ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:connectivity-apache-httpclient5")),(0,l.kt)("li",{parentName:"ul"},"Module ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:servlet")," has been removed and functionally replaced by ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:servlet-jakarta")," (replacing usage of ",(0,l.kt)("inlineCode",{parentName:"li"},"javax.servlet")," with ",(0,l.kt)("inlineCode",{parentName:"li"},"jakarta.servlet"),")"),(0,l.kt)("li",{parentName:"ul"},"Module ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:scp-cf")," has been deprecated and functionally replaced by ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk:sdk-core")))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Full list of removed modules"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Bill of Materials",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk:sdk-sjb-bom")," Please use the cf-tomee7-bom and the sdk-bom instead."))),(0,l.kt)("li",{parentName:"ul"},"Archetypes (Replaced by single archetype: ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.archetypes:spring-boot3"),")",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.archetypes:scp-cf-tomee")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.archetypes:scp-neo-javaee7")))),(0,l.kt)("li",{parentName:"ul"},"Neo related modules. Please migrate to the Cloud Foundry environment.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:auditlog-scp-neo")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-scp-neo")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:cloudplatform-core-scp-neo")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:concurrency-scp-neo")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:scp-neo")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:security-scp-neo")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:tenant-scp-neo")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.plugins:scp-neo-maven-plugin")))),(0,l.kt)("li",{parentName:"ul"},"Generator CLIs",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.datamodel:odata-generator-cli"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Call the generator directly as a maven plugin:"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mvn com.sap.cloud.sdk.datamodel:odata-generator-maven-plugin:5.0.0:generate")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.datamodel:odata-v4-generator-cli"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Call the generator directly as a maven plugin:"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mvn com.sap.cloud.sdk.datamodel:odata-v4-generator-maven-plugin:5.0.0:generate")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.datamodel:openapi-generator-cli"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Call the generator directly as a maven plugin:"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"mvn com.sap.cloud.sdk.datamodel:openapi-generator-maven-plugin:5.0.0:generate")))))),(0,l.kt)("li",{parentName:"ul"},"Pregenerated Clients. ",(0,l.kt)("a",{parentName:"li",href:"#generate-and-use-your-own-odata-vdm"},"Generate and use your own OData VDM")," instead.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.s4hana:s4hana-all")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.s4hana:s4hana-api-odata")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.s4hana:s4hana-api-odata-onpremise")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.s4hana:s4hana-api-odata-v4")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.s4hana:s4hana-api-odata-v4-onpremise")))),(0,l.kt)("li",{parentName:"ul"},"Services (Dropped without replacement)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:blockchain-business-services-sdk")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:blockchain-business-services-visibility")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:blockchain-client-fabric")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:blockchain-client-multichain")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:btp-business-rules")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:btp-shared-ledger-client")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:scp-blockchain")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:scp-business-logging-all")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:scp-business-logging-core")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:scp-business-logging-odata")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:scp-business-logging-rest")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.services:scp-workflow-cf")))),(0,l.kt)("li",{parentName:"ul"},"Others",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:auditlog")," (See ",(0,l.kt)("a",{parentName:"li",href:"./5.0-upgrade-steps#auditlogging-usage"},"Auditlogging usage")," section below)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:auditlog-scp-cf")," (See ",(0,l.kt)("a",{parentName:"li",href:"./5.0-upgrade-steps#auditlogging-usage"},"Auditlogging usage")," section below)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:cloudplatform-connectivity-scp")," (No replacement necessary)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:cloudplatform-core-scp-cf")," (No replacement necessary)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:security-scp-cf")," (Functionally integrated into the ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:security")," module)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:security-servlet")," (See the ",(0,l.kt)("a",{href:""},"ServletFilter")," section below)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:tenant-scp-cf")," (Functionally integrated into the ",(0,l.kt)("inlineCode",{parentName:"li"},"com.sap.cloud.sdk.cloudplatform:tenant")," module)"))))),(0,l.kt)("p",null,"If you are using our BOMs to provide the module versions, a fast way to do identify those is to run any ",(0,l.kt)("inlineCode",{parentName:"p"},"mvn")," command.\nThis will now lead to error messages like this:"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"'dependencies.dependency.version' for com.sap.cloud.sdk.cloudplatform:auditlog-scp-cf:jar is missing")),(0,l.kt)("p",null,"This helps you to identify which modules you need to remove or replace in your project setup."),(0,l.kt)("h2",{id:"steps-to-migrate-destination-usages"},"Steps to migrate ",(0,l.kt)("inlineCode",{parentName:"h2"},"Destination")," usages"),(0,l.kt)("p",null,"Version 5 of the SAP Cloud SDK comes with a major cleanup of the APIs around the ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination")," concept.\nLuckily, this cleanup comes ",(0,l.kt)("strong",{parentName:"p"},"without a lot of breaking changes")," so that existing applications require only a minimum of adjustments.\nTo make the process of adjusting existing applications as easy as possible, please follow the below steps:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Remove any invocation of ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination#decorate"),".\nThis method was only really used in conjunction with the ",(0,l.kt)("inlineCode",{parentName:"p"},"DefaultErpHttpDestination"),", which has been removed in this major version update.\nThe functionality has been moved internally, so that decorating existing ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination")," instances is no longer needed.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"(Optional) Remove any invocations of ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination#asHttp")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination#asRfc"),".\nA big part of the ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination")," cleanup was to straighten our public APIs that previously expected specific sub-types of ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"DestinationProperties")," (e.g. ",(0,l.kt)("inlineCode",{parentName:"p"},"HttpClientAccessor#getHttpClient(HttpDestinationProperties)"),").\nThese APIs now all simply rely on ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination"),", which makes casting via ",(0,l.kt)("inlineCode",{parentName:"p"},"#asHttp")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"#asRfc")," unnecessary.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Adjust error handling.\nPrior to version 5 of the SAP Cloud SDK, ",(0,l.kt)("inlineCode",{parentName:"p"},"Destination#asHttp")," would throw an Exception in case the Destination Service wasn't able to provide valid ",(0,l.kt)("inlineCode",{parentName:"p"},"Authorization")," header suggestions.\nThis has been changed so that ",(0,l.kt)("inlineCode",{parentName:"p"},"asHttp")," will no longer throw an Exception.\nInstead, calling the ",(0,l.kt)("inlineCode",{parentName:"p"},"getHeaders")," method on an ",(0,l.kt)("inlineCode",{parentName:"p"},"HttpDestination")," will throw an exception if any ",(0,l.kt)("inlineCode",{parentName:"p"},"Authorization")," header suggestion provided by the Destination service contained an error."),(0,l.kt)("p",{parentName:"li"},"This change is ",(0,l.kt)("strong",{parentName:"p"},"important")," to keep in mind because it influences where applications are expected to catch Exceptions as the ",(0,l.kt)("inlineCode",{parentName:"p"},"getHeaders")," method will be called during request execution."))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example"),(0,l.kt)("p",null,"Given the following code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'Try<Destination> maybeDestination = DestinationAccessor.tryGetDestination("my-destination");\nif (maybeDestination.isFailure()) {\n    throw new IllegalStateException("Unable to retrieve \'my-destination\'.", maybeDestination.getCause());\n}\n\nHttpDestination httpDestination;\ntry {\n    httpDestination = maybeDestination.get().asHttp();\n} catch (DestinationAccessException e) {\n    throw new IllegalStateException("Destination service wasn\'t able to provide a valid HTTP destination.", e);\n}\n\ntry {\n    new MyODataService().getAllEntities().executeRequest(httpDestination);\n} catch (ODataException e) {\n    throw new IllegalStateException("Unable to retrieve odata entities.", e);\n}\n')),(0,l.kt)("p",null,"The code should be updated like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-diff"},'Try<Destination> maybeDestination = DestinationAccessor.tryGetDestination("my-destination");\nif (maybeDestination.isFailure()) {\n    throw new IllegalStateException("Unable to retrieve \'my-destination\'.", maybeDestination.getCause());\n}\n\n- HttpDestination httpDestination;\n- try {\n-   httpDestination = maybeDestination.get().asHttp();\n- } catch (DestinationAccessException e) {\n-   throw new IllegalStateException("Destination service wasn\'t able to provide a valid HTTP destination.", e);\n- }\n\ntry {\n-   new MyODataService().getAllEntities().executeRequest(httpDestination);\n+   new MyODataService().getAllEntities().executeRequest(maybeDestination.get());\n+ } catch (DestinationAccessException e) {\n+   throw new IllegalStateException("Destination service wasn\'t able to provide a valid HTTP destination.", e);\n} catch (ODataException e) {\n    throw new IllegalStateException("Unable to retrieve odata entities.", e);\n}\n'))),(0,l.kt)("ol",{start:4},(0,l.kt)("li",{parentName:"ol"},"Replace any of the removed classes related to the ",(0,l.kt)("inlineCode",{parentName:"li"},"Destination")," API as mentioned in the ",(0,l.kt)("a",{parentName:"li",href:"#remove-or-replace-modified-cloud-sdk-apis"},"list of removed APIs"),".")),(0,l.kt)("h2",{id:"remove-or-replace-modified-cloud-sdk-apis"},"Remove or Replace Modified Cloud SDK APIs"),(0,l.kt)("p",null,"Once the build doesn't complain about missing dependency versions anymore, you can start to fix the compilation errors."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Full list of removed API"),(0,l.kt)("table",null,(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("b",null,"API")),(0,l.kt)("td",null,(0,l.kt)("b",null,"Replacement")),(0,l.kt)("td",null,(0,l.kt)("b",null,"Comment")))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,"DefaultErpHttpDestination"),(0,l.kt)("td",null,"HttpDestination"),(0,l.kt)("td",null,"HttpDestination now automatically adds sap-client and sap-language headers defined on the destination")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ErpHttpDestination"),(0,l.kt)("td",null,"DefaultHttpDestination"),(0,l.kt)("td",null,"-")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ErpHttpDestinationProperties"),(0,l.kt)("td",null,"DefaultHttpDestination"),(0,l.kt)("td",null,"-")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ErpHttpDestinationUtils"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement necessary")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"AbstractHttpDestination"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement necessary")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"WrappedDestination"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement necessary")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"AbstractScpDestination"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement necessary")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"AbstractScpDestinationBuilder"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement necessary")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfDestination"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement necessary")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfDestinationServiceResponseProvider"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement necessary")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfHttpDestination"),(0,l.kt)("td",null,"DefaultHttpDestination"),(0,l.kt)("td",null,"-")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfRfcDestination"),(0,l.kt)("td",null,"DefaultRfcDestination"),(0,l.kt)("td",null,"-")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"WithDestinationName"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"StringConverter"),(0,l.kt)("td",null,"Java Standard Library"),(0,l.kt)("td",null,"The Java Standard Library offers the same features, e.g.",(0,l.kt)("code",null,"SimpleDateFormat")," or ",(0,l.kt)("code",null,"DateTimeFormatter"),", with the pattern",(0,l.kt)("code",null,"yyyy-MM-dd")," or ",(0,l.kt)("code",null,"yyyy-MM-dd HH:mm:ss"))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"StringValidator"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://commons.apache.org/proper/commons-codec/"},"Apache Commons Codec")),(0,l.kt)("td",null,"Use libraries like"," ",(0,l.kt)("a",{href:"https://commons.apache.org/proper/commons-codec/"},"Apache Commons Codec"),", which offers a"," ",(0,l.kt)("a",{href:"https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html"},"Base64")," ","class.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ClientCredentialsValidator"),(0,l.kt)("td",null,"Java Standard Library"),(0,l.kt)("td",null,"For validation client secrets see ",(0,l.kt)("code",null,"StringValidator")," above. To validate the client id, try to match the regular expression",(0,l.kt)("code",null,"[a-zA-Z0-9\\\\-!|]+"),".")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"OAuth2ServiceProvider"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client"},"SAP BTP Java Token Client")),(0,l.kt)("td",null,"Please directly use the ",(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client"},"SAP BTP Java Token Client")," library instead.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"AuthTokenBuilder"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/auth0/java-jwt"},"Java JWT implementation")),(0,l.kt)("td",null,"For creating an ",(0,l.kt)("code",null,"AuthToken")," from scratch, please manually define the claims and optional audience field. For example:",(0,l.kt)("pre",null,"String jwt = JWT.create()",(0,l.kt)("br",null),'\xa0\xa0.withClaim("zid", "tenant-id")',(0,l.kt)("br",null),'\xa0\xa0.withClaim("iss", "http://subscriber.domain")',(0,l.kt)("br",null),'\xa0\xa0.withAudience("my-app!t123")',(0,l.kt)("br",null),"\xa0\xa0.sign(Algorithm.none());",(0,l.kt)("br",null),"AuthToken token = new AuthToken(JWT.decode(jwt));"),"Alternatively for creating extended unit tests based on token handling, please find the ",(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main/java-security-test"},"SAP BTP Java Security Test")," library instead.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"AccessToken"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"Use the results returned by the ",(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main/token-client"},"Token Client library")," instead")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"AuditLogger"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"You can use version 4 of the auditlog artifact with version 5 of the SAP Cloud SDK. Please refer the ",(0,l.kt)("a",{href:"#auditlogging-usage"},"Auditlogging usage")," section below for more details. Please approach the SAP Cloud SDK development team if you face issues by ",(0,l.kt)("a",{href:"https://github.com/SAP/cloud-sdk-java/issues/new"},"creating a GitHub support issue"),".",(0,l.kt)("br",null),"This change also affects the Auditlog integration with the S/4HANA Connectivity module. You will have to explicitly use `AuditLogger` to log events.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfPrincipal"),(0,l.kt)("td",null,"DefaultPrincipal"),(0,l.kt)("td",null," - ")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfPrincipalFacade"),(0,l.kt)("td",null,"DefaultPrincipalFacade"),(0,l.kt)("td",null," - ")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"LocalScopePrefixProvider"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"DefaultLocalScopePrefixProvider"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"LocalScopePrefixExtractor"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"Audience"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",{id:"XsuaaComment"},"Use the SAP BTP Security Libraries to retrieve token information from the token stored in the ",(0,l.kt)("code",null,"SecurityContext"),". For example: ",(0,l.kt)("br",null),(0,l.kt)("pre",null,"Token token = SecurityContext.getToken(); ",(0,l.kt)("br",null),"String audience = token.getClaimAsString(TokenClaims.AUDIENCE); ",(0,l.kt)("br",null),"List<String> scopes = token.getClaimAsStringList(TokenClaims.XSUAA.SCOPES); ",(0,l.kt)("br",null),"..."),"See the ",(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/blob/main/java-api/src/main/java/com/sap/cloud/security/token/TokenClaims.java"},(0,l.kt)("code",null,"TokenClaims"))," class for additional claims.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"Authorization"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"Role"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"Scope"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"TenantSpecificAuthorization"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"UserSpecificAuthorization"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"PrincipalAttribute"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"CollectionPrincipalAttribute"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"SimplePrincipalAttribute"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"StringCollectionPrincipalAttribute"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"StringPrincipalAttribute"),(0,l.kt)("td",null,(0,l.kt)("a",{href:"https://github.com/SAP/cloud-security-services-integration-library/tree/main"},"SAP BTP Security Libraries")),(0,l.kt)("td",null,"See comment on ",(0,l.kt)("a",{href:"#XsuaaComment"},"retrieving token information."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("p",null,"ScpCfDestinationRetrievalStrategy"),(0,l.kt)("p",null,".CURRENT_TENANT_THEN_PROVIDER")),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"Please query subscriber and provider tenants individually instead using ",(0,l.kt)("code",null,"ONLY_SUBSCRIBER")," and ",(0,l.kt)("code",null,"ALWAYS_PROVIDER"))),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("p",null,"PrincipalPropagationStrategy"),(0,l.kt)("p",null,".setDefaultStrategy(...)")),(0,l.kt)("td",null,"PrincipalPropagationMode"),(0,l.kt)("td",null,"Use via destination custom property: ",(0,l.kt)("br",null),(0,l.kt)("code",null,"DestinationProperty.PRINCIPAL_PROPAGATION_MODE = (TOKEN_FORWARDING|TOKEN_EXCHANGE)"),"Default: ",(0,l.kt)("code",null,"TOKEN_FORWARDING"),", for reduced token exchanges. ",(0,l.kt)("a",{href:"https://help.sap.com/docs/connectivity/sap-btp-connectivity-cf/configure-principal-propagation-via-user-exchange-token",target:"_new"},"See more."))),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfTenant"),(0,l.kt)("td",null,"DefaultTenant"),(0,l.kt)("td",null," - ")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"DwcTenant"),(0,l.kt)("td",null,"DefaultTenant"),(0,l.kt)("td",null," - ")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfTenantFacade"),(0,l.kt)("td",null,"DefaultTenantFacade"),(0,l.kt)("td",null," - ")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ThreadContextDecoratorInternal"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"Neo related classes are not supported anymore.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"JndiLookupAccessor"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"Neo related classes are not supported anymore.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"JndiLookupFacade"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"Neo related classes are not supported anymore.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"DefaultJndiLookupFacade"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"Neo related classes are not supported anymore.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"WithRuntimeDependencies"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"Neo related classes are not supported anymore.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfSecretStore"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfSecretStoreFacade"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"SecretStore"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"SecretStoreAccessor"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"SecretStoreFacade"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No SDK replacement. A similiar functioniality can be achieved by using the java.security.KeyStore feature.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"CloudPlatform"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement, as all platform specifics are handled by the ",(0,l.kt)("a",{href:"https://github.com/SAP/btp-environment-variable-access"},"Service Binding library"),".")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfCloudPlatform"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement, as all platform specifics are handled by the ",(0,l.kt)("a",{href:"https://github.com/SAP/btp-environment-variable-access"},"Service Binding library"),".")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"CloudPlatformFacade"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement, as all platform specifics are handled by the ",(0,l.kt)("a",{href:"https://github.com/SAP/btp-environment-variable-access"},"Service Binding library"),".")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ScpCfCloudPlatformFacade"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement, as all platform specifics are handled by the ",(0,l.kt)("a",{href:"https://github.com/SAP/btp-environment-variable-access"},"Service Binding library"),".")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"CloudPlatformAccessor"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement, as all platform specifics are handled by the ",(0,l.kt)("a",{href:"https://github.com/SAP/btp-environment-variable-access"},"Service Binding library"),".")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ThreadContextInvocationInterceptor"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,"ThrowableAssertionUtil"),(0,l.kt)("td",null,"-"),(0,l.kt)("td",null,"No replacement."))))),(0,l.kt)("h2",{id:"generate-and-use-your-own-odata-vdm"},"Generate and Use Your Own OData VDM"),(0,l.kt)("h3",{id:"generate-your-own-odata-vdm"},"Generate Your Own OData VDM"),(0,l.kt)("p",null,"The SAP Cloud SDK no longer provides pre-generated OData VDMs. We made this decision to reduce the maintenance effort and to allow you to generate your own VDM with the exact version of the OData service you are using. That way there is no need to wait for the next SDK release to get the latest changes of an OData service you are consuming."),(0,l.kt)("p",null,"To generate your own OData VDM, you can use the ",(0,l.kt)("a",{parentName:"p",href:"../features/odata/vdm-generator"},"OData Generator Maven Plugin")," directly.\nYou can use the following configuration to generate a VDM that is compatible with the OData VDM the SDK provided in version 4:"),(0,l.kt)(o.Z,{groupId:"odataVersion",defaultValue:"v4",values:[{label:"OData v2",value:"v2"},{label:"OData v4",value:"v4"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"v4",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<inputDirectory>${project.basedir}/src/main/resources/odata/edmx</inputDirectory>\n<outputDirectory>${project.build.directory}/vdm</outputDirectory>\n<serviceNameMappingFile>${project.basedir}/src/main/resources/odata/serviceNameMappings.properties</serviceNameMappingFile>\n<deleteOutputDirectory>true</deleteOutputDirectory>\n<packageName>com.sap.cloud.sdk.s4hana.datamodel.odatav4</packageName>\n<compileScope>COMPILE</compileScope>\n")),(0,l.kt)("p",null,"The file specified under ",(0,l.kt)("em",{parentName:"p"},"serviceNameMappingFile")," will be created and populated, if it doesn't exist yet.\nIf you want to create a VDM that is compatible with the OData VDM the SDK provided in version 4, you can use this ",(0,l.kt)("a",{target:"_blank",href:n(37080).Z},(0,l.kt)("em",null,"serviceNameMappings.properties")),".")),(0,l.kt)(i.Z,{value:"v2",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<inputDirectory>${project.basedir}/src/main/resources/odata/edmx</inputDirectory>\n<outputDirectory>${project.build.directory}/vdm</outputDirectory>\n<serviceNameMappingFile>${project.basedir}/src/main/resources/odata/serviceNameMappings.properties</serviceNameMappingFile>\n<deleteOutputDirectory>true</deleteOutputDirectory>\n<packageName>com.sap.cloud.sdk.s4hana.datamodel.odata</packageName>\n<compileScope>COMPILE</compileScope>\n")),(0,l.kt)("p",null,"The file specified under ",(0,l.kt)("em",{parentName:"p"},"serviceNameMappingFile")," will be created and populated, if it doesn't exist yet.\nIf you want to create a VDM that is compatible with the OData VDM the SDK provided in version 4, you can use this ",(0,l.kt)("a",{target:"_blank",href:n(23886).Z},(0,l.kt)("em",null,"serviceNameMappings.properties")),"."))),(0,l.kt)("p",null,"If you want to generate a VDM that is compatible with the On-Premise OData VDM the SDK provided in version 4, take special care of the ",(0,l.kt)("inlineCode",{parentName:"p"},"packageName")," and the contents of the ",(0,l.kt)("em",{parentName:"p"},"serviceNameMappingFile")," to reflect what you are expecting."),(0,l.kt)("h3",{id:"handle-odata-vdm-instantiation"},"Handle OData VDM Instantiation"),(0,l.kt)("p",null,"Depending on your project setup, you might have relied on the ",(0,l.kt)("inlineCode",{parentName:"p"},"@Inject")," annotation in your OData VDM services.\nAs the OData generators don't generate the ",(0,l.kt)("inlineCode",{parentName:"p"},"javax.inject.Named")," annotations anymore, you will need to instantiate your own services instead.\nFor that you can either use your own dependency injection framework, or instantiate the services manually."),(0,l.kt)("p",null,"The manual approach would look something like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-diff"},"- @Inject\n- private BusinessPartnerService businessPartnerService;\n+ private BusinessPartnerService businessPartnerService = new DefaultBusinessPartnerService();\n")),(0,l.kt)("h2",{id:"remove-discontinued-servletfilter-from-your-webxml"},"Remove Discontinued ServletFilter from Your ",(0,l.kt)("inlineCode",{parentName:"h2"},"web.xml")),(0,l.kt)("p",null,"We decided to remove all security related ",(0,l.kt)("inlineCode",{parentName:"p"},"Filter")," implementations from the SAP Cloud SDK, to have a clearer separation between the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/SAP/cloud-security-services-integration-library/"},"SAP Security Libraries")," and the SAP Cloud SDK."),(0,l.kt)("p",null,"This means you need to remove all mentions of the following filters from your ",(0,l.kt)("inlineCode",{parentName:"p"},"web.xml")," (mind the ",(0,l.kt)("inlineCode",{parentName:"p"},"security")," in the package): ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.cloud.sdk.cloudplatform.security.servlet.*Filter")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.cloud.sdk.cloudplatform.servlet.RequestAccessorFilter")," is functionally replaced by ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.cloud.sdk.cloudplatform.servletjakarta.RequestAccessorFilter")," found in ",(0,l.kt)("inlineCode",{parentName:"p"},"com.sap.cloud.sdk.cloudplatform:servlet-jakarta"),"."),(0,l.kt)("h2",{id:"auditlogging-usage"},"Auditlogging usage"),(0,l.kt)("p",null,"Auditlogging feature is no longer released with version 5 of the SAP Cloud SDK.\nIf you want to continue using audit logging, you could still use version 4 of the audit logging artifact along with version 5 of the SAP Cloud SDK."),(0,l.kt)("p",null,"You would have to manually add all of the following artifacts(only available internally) to your project:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"      <dependency>\n         <groupId>com.sap.cloud.sdk.cloudplatform</groupId>\n         <artifactId>auditlog-scp-cf</artifactId>\n         <version>4.28.0</version> \x3c!-- Pay attention that this the old v4 artifact --\x3e\n      </dependency>\n      <dependency>\n         <groupId>com.sap.xs.auditlog</groupId>\n         <artifactId>audit-java-client-api</artifactId>\n         <version>latest-available-version-in-artifactory</version>\n      </dependency>\n      <dependency>\n         <groupId>com.sap.xs.auditlog</groupId>\n         <artifactId>audit-java-client-impl</artifactId>\n         <version>latest-available-version-in-artifactory</version>\n      </dependency>\n      <dependency>\n         <groupId>com.sap.xs.java</groupId>\n         <artifactId>xs-env</artifactId>\n         <version>latest-available-version-in-artifactory</version>\n      </dependency>\n")),(0,l.kt)("p",null,"You will then be able to log events using the ",(0,l.kt)("inlineCode",{parentName:"p"},"AuditLogger")," API."))}m.isMDXComponent=!0},85162:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),l=n(34334);const o="tabItem_Ymn6";function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,l.Z)(o,i),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>S});var a=n(87462),l=n(67294),o=n(34334),i=n(12466),r=n(76775),s=n(91980),u=n(67392),d=n(50012);function c(e){return function(e){var t;return(null==(t=l.Children.map(e,(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:t.filter(Boolean))??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:l}}=e;return{value:t,label:n,attributes:a,default:l}}))}function p(e){const{values:t,children:n}=e;return(0,l.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function k(e){let{queryString:t=!1,groupId:n}=e;const a=(0,r.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(o),(0,l.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=p(e),[i,r]=(0,l.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[s,u]=k({queryString:n,groupId:a}),[c,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,d.Nk)(n);return[a,(0,l.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),g=(()=>{const e=s??c;return m({value:e,tabValues:o})?e:null})();(0,l.useLayoutEffect)((()=>{g&&r(g)}),[g]);return{selectedValue:i,selectValue:(0,l.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);r(e),u(e),h(e)}),[u,h,o]),tabValues:o}}var g=n(72389);const f="tabList__CuJ",v="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:r,selectValue:s,tabValues:u}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),p=e=>{const t=e.currentTarget,n=d.indexOf(t),a=u[n].value;a!==r&&(c(t),s(a))},m=e=>{var t;let n=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;n=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;n=d[t]??d[d.length-1];break}}null==(t=n)||t.focus()};return l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:i}=e;return l.createElement("li",(0,a.Z)({role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,key:t,ref:e=>d.push(e),onKeyDown:m,onClick:p},i,{className:(0,o.Z)("tabs__item",v,null==i?void 0:i.className,{"tabs__item--active":r===t})}),n??t)})))}function b(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,l.cloneElement)(e,{className:"margin-top--md"}):null}return l.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function N(e){const t=h(e);return l.createElement("div",{className:(0,o.Z)("tabs-container",f)},l.createElement(y,(0,a.Z)({},e,t)),l.createElement(b,(0,a.Z)({},e,t)))}function S(e){const t=(0,g.Z)();return l.createElement(N,(0,a.Z)({key:String(t)},e))}},23886:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/SDKv4-ODatav2-serviceNameMappings-34740cba84ef539e1fc9ad72d9c9bdc9.properties"},37080:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/SDKv4-ODatav4-serviceNameMappings-ac34a445d1ce29bb6a8c86bc8b129b7b.properties"}}]);