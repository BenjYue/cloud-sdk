<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="search" type="application/opensearchdescription+xml" title="SAP Cloud SDK" href="/cloud-sdk/opensearch.xml">
<script src="https://sap.github.io/cloud-sdk/js/swa.js"></script><title data-react-helmet="true">Use Destinations To Connect To Other Systems and Services | SAP Cloud SDK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://sap.github.io/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Use Destinations To Connect To Other Systems and Services | SAP Cloud SDK"><meta data-react-helmet="true" name="description" content="This article describes how the SAP Cloud SDK for Java can be used to establish connections to other systems and services like SAP S/4HANA or SAP Business Technology Platform services."><meta data-react-helmet="true" property="og:description" content="This article describes how the SAP Cloud SDK for Java can be used to establish connections to other systems and services like SAP S/4HANA or SAP Business Technology Platform services."><meta data-react-helmet="true" name="keywords" content="sap,cloud,sdk,destination,java,connectivity"><link data-react-helmet="true" rel="icon" href="/cloud-sdk/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://sap.github.io/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service"><link data-react-helmet="true" rel="alternate" href="https://sap.github.io/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://sap.github.io/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/cloud-sdk/assets/css/styles.8a5fed9a.css">
<link rel="preload" href="/cloud-sdk/assets/js/runtime~main.33fcc8c4.js" as="script">
<link rel="preload" href="/cloud-sdk/assets/js/main.21a68261.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cloud-sdk/"><div class="navbar__logo"><img src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/cloud-sdk/img/logo-dark.svg" alt="SAP Cloud SDK" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">SAP Cloud SDK</b></a><a class="navbar__item navbar__link" href="/cloud-sdk/docs/overview/overview-cloud-sdk">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Support</a><ul class="dropdown__menu"><li><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/SAP/cloud-sdk-js/issues/new/choose" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>GitHub JavaScript<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/SAP/cloud-sdk/issues/new?assignees=&amp;labels=Java&amp;template=sap-cloud-sdk-for-java-issue.md&amp;title=" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span> GitHub Java<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a class="dropdown__link" href="/cloud-sdk/docs/overview/get-support">Support Details</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Release Notes</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cloud-sdk/docs/java/release-notes-sap-cloud-sdk-for-java">Java</a></li><li><a class="dropdown__link" href="/cloud-sdk/docs/js/release-notes-sap-cloud-sdk-for-javascript-and-typescript">JavaScript/TypeScript</a></li></ul></div><a href="https://search.maven.org/search?q=g:com.sap.cloud.sdk*" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Maven Central<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">npm</a><ul class="dropdown__menu"><li><a href="https://www.npmjs.com/search?q=sap-cloud-sdk*" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Core Modules<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.npmjs.com/search?q=sap%2Fsap-cloud-vdm*" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>SAP S/4HANA Cloud<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.npmjs.com/search?q=sap%2Fsap-cloud-op*" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>SAP S/4HANA On-Premise<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a class="navbar__item navbar__link" href="/cloud-sdk/docs/overview/cloud-sdk-feature-matrix">Feature Matrix</a></div><div class="navbar__items navbar__items--right"><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cloud-sdk/docs/overview/overview-cloud-sdk">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/cloud-sdk/docs/java/overview-cloud-sdk-for-java">Java</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/overview-cloud-sdk-for-java">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/cloud-sdk/docs/java/features/odata/overview">Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/cloud-sdk/docs/java/features/odata/overview">OData</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/cloud-sdk/docs/java/features/rest/overview">OpenAPI</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/bapi-and-rfc/bapi-and-rfc-overview">BAPI/RFC</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service">Connectivity</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service">Destinations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-http-client">HttpClient</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-mtls">Certificate-based Authentication</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/cloud-sdk/docs/java/features/multi-tenancy/multi-tenancy-thread-context">Multitenancy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/cloud-sdk/docs/java/features/resilience">Resilience &amp; Caching</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/cloud-sdk/docs/java/environments/sap-btp-environments-overview">Environments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/cloud-sdk/docs/java/guides/cf-cli">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/cloud-sdk/docs/java/extensions/extensions-supported-by-sap-cloud-sdk-for-java">Extensions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/cloud-sdk/docs/java/video/video-tutorial-about-getting-started-with-sap-cloud-sdk-for-java">Video Tutorials</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/sdk-java-troubleshooting-frequent-problems">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/release-policy">Release Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/release-notes-sap-cloud-sdk-for-java">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/java/frequently-asked-questions">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cloud-sdk/docs/js/overview-cloud-sdk-for-javascript">JavaScript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cloud-sdk/docs/community/community-call">Community</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/cloud-sdk/docs/related-projects/cloud-application-model">Related Projects</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Use Destinations To Connect To Other Systems and Services</h1></header><p>The SAP Cloud SDK offers some basic functionality that helps with connecting to other systems and services like SAP S/4HANA Cloud.
The SAP Cloud SDK introduces the general concept of a <code>Destination</code> which holds basic information about how to connect to such a system.
That could for instance be a <code>url</code>, a username, and password for basic authentication or some custom headers.</p><p>This concept is integrated with the <a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/7e306250e08340f89d6c103e28840f30.html" target="_blank" rel="noopener noreferrer">Destination Service</a> that is available on the SAP Business Technology Platform.
If the application has a service binding to this service in place the SAP Cloud SDK will provide access to these destinations.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="accessing-destinations">Accessing Destinations<a class="hash-link" href="#accessing-destinations" title="Direct link to heading">â€‹</a></h2><p>In general destinations are accessed through the <code>DestinationAccessor</code>:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.getDestination(&quot;my-destination&quot;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This will look up the destination in the destination service if the application is running on SAP Business Technology Platform.
Other sources like the environment variables are also considered.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Authentication Flows</h5></div><div class="admonition-content"><p>Authentication flows like <strong>OAuth 2.0 Client Credentials</strong> and others are usually performed by the Destination Service.
They are executed when querying the destination information and the resulting authorization information will be included in the response.</p><p>See the note on <a href="#supported-authentication-flows">supported authentication flows</a>.</p></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Destinations are cached for 5 minutes</h5></div><div class="admonition-content"><p>Mind that Destinations are cached for 5 minutes.
If you are debugging you Destination configuration either wait for 5 minutes before the next retrieval or restart you application.
We plan to make this cache configurable.</p><p>To minimize the runtime overhead of finding destinations, the SAP Cloud SDK uses caching to internally maintain a list of already retrieved destinations.
Therefore, subsequent calls to <code>DestinationAccessor.getDestination(&quot;my-destination&quot;);</code> will be served from that cache instead of performing the look up over and over again.
Cache entries will automatically be invalidated 5 minutes after their initial creation.</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="supported-authentication-flows">Supported Authentication Flows<a class="hash-link" href="#supported-authentication-flows" title="Direct link to heading">â€‹</a></h2><p>The SAP Cloud SDK does not implement most of the authentication flows itself.
Instead, it relies on the Destination Service to perform the flows and complements it with additional steps, if necessary.</p><p>The SAP Cloud SDK recognizes the following authentication types of the SAP BTP Destination Service:</p><table><thead><tr><th align="left">Authentication Type</th><th align="left">Parameter Name</th></tr></thead><tbody><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/4e13a04147314e8e9e54321f25d93fdc.html" target="_blank" rel="noopener noreferrer"><code>NoAuthentication</code></a></td><td align="left"><code>AuthenticationType.NO_AUTHENTICATION</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/4e13a04147314e8e9e54321f25d93fdc.html" target="_blank" rel="noopener noreferrer"><code>BasicAuthentication</code></a></td><td align="left"><code>AuthenticationType.BASIC_AUTHENTICATION</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/73194cc419894433994c5f0444b4c6a1.html" target="_blank" rel="noopener noreferrer"><code>PrincipalPropogation</code></a></td><td align="left"><code>AuthenticationType.PRINCIPAL_PROPAGATION</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/4e13a04147314e8e9e54321f25d93fdc.html" target="_blank" rel="noopener noreferrer"><code>ClientCertificateAuthentication</code></a></td><td align="left"><code>AuthenticationType.CLIENT_CERTIFICATE_AUTHENTICATION</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/b865ed651e414196b39f8922db2122c7/Cloud/en-US/e022a5eebaec4dbbabef7f5d60e13dd4.html?q=AppToAppSSO" target="_blank" rel="noopener noreferrer"><code>AppToAppSSO</code></a></td><td align="left"><code>AuthenticationType.APP_TO_APP_SSO</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/4e1d742a3d45472d83b411e141729795.html" target="_blank" rel="noopener noreferrer"><code>OAuth2ClientCredentials</code></a></td><td align="left"><code>AuthenticationType.OAUTH2_CLIENT_CREDENTIALS</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/c69ea6aacd714ad2ae8ceb5fc3ceea56.html" target="_blank" rel="noopener noreferrer"><code>OAuth2SAMLBearerAssertion</code></a></td><td align="left"><code>AuthenticationType.OAUTH2_SAML_BEARER_ASSERTION</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/e3c333f9de6245fca326993f2397c13a.html" target="_blank" rel="noopener noreferrer"><code>OAuth2UserTokenExchange</code></a></td><td align="left"><code>AuthenticationType.OAUTH2_USER_TOKEN_EXCHANGE</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/283cd2d1c72147a18c69daf681650f07.html" target="_blank" rel="noopener noreferrer"><code>OAuth2JWTBearer</code></a></td><td align="left"><code>AuthenticationType.OAUTH2_JWT_BEARER</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/ceb8c4fa61e6443190185696c6d0342d.html" target="_blank" rel="noopener noreferrer"><code>SAPAssertionSSO</code></a></td><td align="left"><code>AuthenticationType.SAP_ASSERTION_SSO</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/2d168c76daa1406b8567eee447eb1b2f/Cloud/en-US/a9c2c896be574077b56a7b2e2790e86c.html?q=InternalSystemAuthentication" target="_blank" rel="noopener noreferrer"><code>InternalSystemAuthentication</code></a></td><td align="left"><code>AuthenticationType.INTERNAL_SYSTEM_AUTHENTICATION</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/452357cdd82a4c0ba6095b36c0057526.html" target="_blank" rel="noopener noreferrer"><code>OAuth2Password</code></a></td><td align="left"><code>AuthenticationType.OAUTH2_PASSWORD</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/d81e1683bd434823abf3ceefc4ff157f.html" target="_blank" rel="noopener noreferrer"><code>SAMLAssertion</code></a></td><td align="left"><code>AuthenticationType.SAML_ASSERTION</code></td></tr></tbody></table><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Other Destination Sources</h5></div><div class="admonition-content"><p>In some situations you may want to obtain a destination <strong>not</strong> from the Destination Service, but e.g. from the environment variables.</p><p>In that case, only <code>NoAuthentication</code> and <code>BasicAuthentication</code> are supported by default.
Additionally, <code>OAuth2ClientCredentials</code> as well as <code>OAuth2UserTokenExchange</code> are available through a dedicated API.</p><p>For more details visit the sections on how to <a href="#configure-http-destinations-for-local-deployment">Configure HTTP Destinations for Local Deployment</a> and <a href="#skip-destination-creation-step-for-certain-authentication-types-on-cloud-foundry">Skip Destination Creation Step for Certain Authentication Types on Cloud Foundry</a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="integrated-multi-tenancy">Integrated Multi-Tenancy<a class="hash-link" href="#integrated-multi-tenancy" title="Direct link to heading">â€‹</a></h3><p>By default, the <code>DestinationAccessor</code> is tenant aware.
If a tenant is available, it will be used to access the destination service on behalf of that tenant.
If no destination is found in the tenant-specific destination service, the SAP Cloud SDK will try to get it using the service binding of the application.</p><p>This default retrieval strategy can be overridden by passing options to the destination loader as follows:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.getLoader().tryGetDestination(destinationName, options);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>See the section on <a href="#building-destination-options">destination options</a> below.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-the-samlassertion-authentication-type">Using the SAMLAssertion Authentication Type<a class="hash-link" href="#using-the-samlassertion-authentication-type" title="Direct link to heading">â€‹</a></h3><p>Using the <a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/d81e1683bd434823abf3ceefc4ff157f.html" target="_blank" rel="noopener noreferrer"><code>SAMLAssertion</code></a> authentication types requires a different caching strategy for <code>HttpClient</code>s.
This is because upon authentication at the target system, a session cookie is returned, which is stored within the used <code>HttpClient</code> instance.
For subsequent calls, the service then expects authenticated clients to include their session cookie.</p><p>By default, the SAP Cloud SDK uses the <code>RequestScopedHttpClientCache</code> to store <code>HttpClient</code> instances for the duration of a specific (incoming) request.
Using this default strategy results into deleting the <code>HttpClient</code> (together with the session cookie) that was used to authorize at the target system, once the initial request has been handled.
To avoid authorizing over and over again, the SAP Cloud SDK offers the <code>TimeScopedHttpClientCache</code>, which keeps existing <code>HttpClient</code>s for a certain period of time.
These instances are then automatically reused for consecutive (incoming) requests, so that the session is retained.</p><p>Switching the cache can be done as follows:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// run this code once in a setup step, afterwards HttpClient instances are kept for 5 minutes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpClientAccessor.setHttpClientCache(new TimeScopedHttpClientCache(5, TimeUnit.MINUTES));</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Hint</h5></div><div class="admonition-content"><p>The cached <code>HttpClient</code> instances are also isolated based on the tenant and principal.</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="supported-proxy-types">Supported Proxy Types<a class="hash-link" href="#supported-proxy-types" title="Direct link to heading">â€‹</a></h2><table><thead><tr><th align="left">Proxy Type</th><th align="left">Parameter Name</th></tr></thead><tbody><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/42a0e6b966924f2e902090bdf435e1b2.html" target="_blank" rel="noopener noreferrer"><code>Internet</code></a></td><td align="left"><code>ProxyType.INTERNET</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/42a0e6b966924f2e902090bdf435e1b2.html" target="_blank" rel="noopener noreferrer"><code>OnPremise</code></a></td><td align="left"><code>ProxyType.ON_PREMISE</code></td></tr><tr><td align="left"><a href="https://help.sap.com/viewer/product/PRIVATE_LINK/CLOUD/en-US" target="_blank" rel="noopener noreferrer"><code>PrivateLink</code></a>*</td><td align="left"><code>ProxyType.PRIVATE_LINK</code></td></tr></tbody></table><p>*<!-- --> Further reading: <a href="https://blogs.sap.com/2021/10/28/btp-private-linky-swear-with-azure-propagate-your-sap-principels/" target="_blank" rel="noopener noreferrer">SAP BTP Private Link Announcement Blog Post</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="decorating-destinations">Decorating Destinations<a class="hash-link" href="#decorating-destinations" title="Direct link to heading">â€‹</a></h2><p>Depending on the use case, one needs to wrap the accessed destination before issuing a request to a system.
This is to make sure all required destination properties are correctly set before invoking the actual request.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="http-destinations">HTTP Destinations<a class="hash-link" href="#http-destinations" title="Direct link to heading">â€‹</a></h3><p>In case of HTTP connections one needs to wrap the retrieved destination as <code>HttpDestination</code> using <code>asHttp()</code>:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.getDestination(&quot;my-destination&quot;).asHttp();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This method ensures that the required destination properties are all set to make the HTTP connection.
With the resulting destination instance depending on the use case one can run HTTP queries for OData or REST.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="bapi-destinations">BAPI Destinations<a class="hash-link" href="#bapi-destinations" title="Direct link to heading">â€‹</a></h3><p>Similarly, for BAPI endpoints you need to use <code>asRfc()</code>:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.getDestination(&quot;my-destination&quot;).asRfc();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="connect-to-sap-s4hana-on-premise">Connect to SAP S/4HANA On-Premise<a class="hash-link" href="#connect-to-sap-s4hana-on-premise" title="Direct link to heading">â€‹</a></h3><p>If your destination is exposing an SAP S/4HANA On-premise service via a <strong><a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/e6c7616abb5710148cfcf3e75d96d596.html" target="_blank" rel="noopener noreferrer">Cloud Connector</a></strong> you need to decorate the destination with <code>DefaultErpHttpDestination</code>:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">final HttpDestination httpDestination =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">destination.asHttp().decorate(DefaultErpHttpDestination::new);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>This ensures the mapping of all SAP S/4HANA properties like <code>sap-client</code> and <code>sap-locale</code> as HTTP request headers.</li><li>In case <strong>Principal Propagation</strong> is specified as an authentication type for the destination the SAP Cloud SDK will automatically apply it.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="registering-destinations-at-runtime">Registering Destinations at Runtime<a class="hash-link" href="#registering-destinations-at-runtime" title="Direct link to heading">â€‹</a></h2><p>The SAP Cloud SDK offers convenient ways to create a destination at runtime and register it so that it will be available via <code>DestinationAccessor.getDestination()</code>.
This is especially useful when working in a local environment.
Destinations configured in the destination service are not available in a local setting and have to be mocked.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="mocking-destinations-for-testing">Mocking Destinations for Testing<a class="hash-link" href="#mocking-destinations-for-testing" title="Direct link to heading">â€‹</a></h3><p>The SAP Cloud SDK offers a <code>MockUtil</code> class that is capable of injecting destinations into the <code>DestinationAccessor</code>:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">final MockUtil mockUtil = new MockUtil();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockDestination destination = MockDestination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .builder(&quot;my-destination&quot;, URI.create(&quot;http://localhost:8080&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mockUtil.mockDestination(destination);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// This will now return the mocked destination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.getDestination(&quot;my-destination&quot;).asHttp();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This helps with keeping production and test code nicely separated.
There are more overloads of the mocking on the <a href="https://help.sap.com/doc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/testutil/MockUtil.html" target="_blank" rel="noopener noreferrer"><code>MockUtil</code> class</a> that you can use.
Refer to <a href="https://developers.sap.com/tutorials/s4sdk-odata-service-cloud-foundry.html#b77d53b0-2d8b-449c-9a9a-9df80ee09a4e" target="_blank" rel="noopener noreferrer">these tutorial steps</a> on how to mock destinations for local development and testing.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-custom-destination-loaders">Using Custom Destination Loaders<a class="hash-link" href="#using-custom-destination-loaders" title="Direct link to heading">â€‹</a></h3><p>The above is useful for testing but not suited for productive code.
If you want to register custom destinations in your productive code you can use the following API:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">customHttpDestination = DefaultHttpDestination.builder(&quot;http://url&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .name(&quot;custom-destination&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">customLoader = new DefaultDestinationLoader()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .registerDestination(customHttpDestination);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.appendDestinationLoader(loader);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// This will now return the custom destination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.getDestination(&quot;custom-destination&quot;).asHttp();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>By default, the <code>DestinationAccessor</code> is using a <code>DestinationLoaderChain</code> that comprises multiple loaders.
These are e.g. a loader to get destinations from the destination service and a loader that reads destinations from environment variables.</p><p>The above <code>appendDestinationLoader()</code> will add the provided loader at the end of such a chain.
That means the new loader can operate as a fallback.
Use <code>prependDestinationLoader()</code> to add it at the beginning if you would like it to take precedence.
Lastly use <code>setLoader()</code> to replace all existing loaders.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="provide-headers-for-destinations">Provide Headers for Destinations<a class="hash-link" href="#provide-headers-for-destinations" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-it-works">How It Works<a class="hash-link" href="#how-it-works" title="Direct link to heading">â€‹</a></h3><p>You can add headers that are sent for any request over destinations.
You can implement custom logic that defines which headers are sent under which circumstances.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Example Use-case</h5></div><div class="admonition-content"><p>Let&#x27;s imagine, you want to send an API token via a request header with any calls made over any destination in your whole application.</p></div></div><p>The SAP Cloud SDK offers the interface <code>DestinationHeaderProvider</code> which defines the method <code>List&lt;Header&gt; getHeaders(DestinationRequestContext)</code>.
At runtime, while preparing an outbound request, the SAP Cloud SDK will use all implementations of that interface which have been registered via the Java ServiceLoader mechanism (see below).
For each registered implementation it invokes the method <code>getHeaders(DestinationRequestContext)</code> and appends the returned headers to the currently prepared request.</p><p>You can also add headers to a specific destination using properties so they will be always included when calling the target system.
See the <a href="#add-headers-via-destination-properties">relevant</a> section below.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="implement-own-header-provider">Implement Own Header Provider<a class="hash-link" href="#implement-own-header-provider" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="implement-the-interface-destinationheaderprovider">Implement the Interface <code>DestinationHeaderProvider</code><a class="hash-link" href="#implement-the-interface-destinationheaderprovider" title="Direct link to heading">â€‹</a></h4><p>To implement your custom destination header provider, you need to implement the interface <code>DestinationHeaderProvider</code>.
The method <code>getHeaders</code> provides access to the request specific context.
The method argument of type <code>DestinationRequestContext</code> lets you access the general properties over which the currently prepared request will be issued.
Depending on your logic to determine headers, you can read the following data types:</p><ul><li><code>DestinationProperties getDestination()</code> (e.g. the general destination name).</li><li><code>URI getRequestUri()</code> (e.g. the request specific query parameters)</li></ul><p>Here is one simple example implementation which returns the same header for each request:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">@Nonnull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public List&lt;Header&gt; getHeaders( @Nonnull final DestinationRequestContext requestContext )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  final Header header = new Header(&quot;API-Token&quot;, obtainApiToken());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return Collections.singletonList(header);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="make-interface-implementation-accessible">Make Interface Implementation Accessible<a class="hash-link" href="#make-interface-implementation-accessible" title="Direct link to heading">â€‹</a></h4><p>The SAP Cloud SDK uses the <a href="https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html" target="_blank" rel="noopener noreferrer">Service Loader</a> mechanism of Java to look up the <code>DestinationHeaderProvider</code> implementations at runtime.
To let your custom implementation be found, you need to provide a configuration file as resource in the folder <code>META-INF/services</code>.
Name this resource file as the interface <code>com.sap.cloud.sdk.cloudplatform.connectivity.DestinationHeaderProvider</code> and mention the fully-qualified class name of your custom implementation.
You can refer to several implementations by putting their fully qualified class names on separate lines.</p><p>Place the new folder + file in your resources folder.
In a Maven project the resource folder is typically <code>src/main/resources/</code>.
For example, if your custom implementation is named <code>ApiTokenHeaderProvider</code> in the package <code>com.example</code>, the configuration should be as follows:</p><ul><li>File path &amp; name:<div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">src/main/resources/META-INF/services/com.sap.cloud.sdk.cloudplatform.connectivity.DestinationHeaderProvider</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li>File content:<div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">com.example.ApiTokenHeaderProvider</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="add-headers-via-destination-properties">Add Headers via Destination Properties<a class="hash-link" href="#add-headers-via-destination-properties" title="Direct link to heading">â€‹</a></h3><p>Here is one example implementation which adds the (&quot;key1&quot;, &quot;value1&quot;) header to every call to the destination:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">destination =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            DefaultHttpDestination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .builder(server.baseUrl())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .property(&quot;URL.headers.key1&quot;, &quot;value1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To include headers into every call to a target system you can define them as properties on the destination.
It can be a destination object that you defined in the Cloud Foundry Cockpit, or one you built in code via a destination builder.
For that, call the <code>.property()</code> method on the destination.
It expects a key-value pair with a key formatted as <code>URL.headers.&lt;key&gt;</code> and an arbitrary value string.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="provide-query-parameters-for-destinations">Provide Query Parameters for Destinations<a class="hash-link" href="#provide-query-parameters-for-destinations" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-it-works-1">How It Works<a class="hash-link" href="#how-it-works-1" title="Direct link to heading">â€‹</a></h3><p>You can add query parameters to a specific destination using properties.
So they will always be included in the query string when calling the target system.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="add-query-parameters-via-destination-properties">Add Query Parameters via Destination Properties<a class="hash-link" href="#add-query-parameters-via-destination-properties" title="Direct link to heading">â€‹</a></h3><p>Here is one simple example implementation which adds &quot;key1=value1&quot; to the query string when calling the destination:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">destination =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            DefaultHttpDestination</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .builder(server.baseUrl())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .property(&quot;URL.queries.key1&quot;, &quot;value1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To include query parameters in the query string when calling to a target system you can define them as properties on the destination.
For that, call the <code>.property()</code> method on the destination.
It expects a key-value pair with a key formatted as <code>URL.headers.&lt;key&gt;</code> and an arbitrary value string.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="retrieving-destinations">Retrieving Destinations<a class="hash-link" href="#retrieving-destinations" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="get-all-destinations-from-the-destination-service-on-cloud-foundry">Get All Destinations From the Destination Service on Cloud Foundry<a class="hash-link" href="#get-all-destinations-from-the-destination-service-on-cloud-foundry" title="Direct link to heading">â€‹</a></h3><p>To fetch all destinations from the Destination Service, you need to make a call to <code>tryGetAllDestinations</code>.
The method queries the <a href="https://api.sap.com/api/SAP_CP_CF_Connectivity_Destination/overview" target="_blank" rel="noopener noreferrer">Destination Service API</a> and retrieves all the destinations available at the service instance and sub-account level.
In case there is a destination available on both the levels with the same name, then this method prioritizes the destination at the service instance level.</p><p>Below is the sample call to <code>tryGetAllDestinations</code>:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Try&lt;Iterable&lt;ScpCfDestination&gt;&gt; destinations = destinationLoader.tryGetAllDestinations(options);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In the above call <code>destinationLoader</code> needs to be an instance of <code>ScpCfDestinationLoader</code>.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="configuring-timeout-durations-when-querying-the-destination-service-on-cloud-foundry">Configuring Timeout Durations When Querying the Destination Service on Cloud Foundry<a class="hash-link" href="#configuring-timeout-durations-when-querying-the-destination-service-on-cloud-foundry" title="Direct link to heading">â€‹</a></h4><p>By default, the <a href="/cloud-sdk/docs/java/features/resilience#resilience-capabilities"><code>TimeLimiter</code> resilience pattern</a> aborts requests to the Destination Service on Cloud Foundry after 6 seconds.
If your app requires more time when fetching destinations, you may create your own <code>ScpCfDestinationLoader</code> instance by:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// Allow requests to take up to 10 seconds instead of just 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DestinationLoader destinationLoader = new ScpCfDestinationLoader(Duration.ofSecond(10));</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This operation overrides the default timeout duration so that you are free to choose whatever value fits your needs.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Hint</h5></div><div class="admonition-content"><p>You may register your <code>destinationLoader</code> within the <code>DestinationAccessor</code> by:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.setLoader(destinationLoader);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>That way, all future requests to the Destination Service will use the increased timeout duration.</p></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="building-destination-options">Building Destination Options<a class="hash-link" href="#building-destination-options" title="Direct link to heading">â€‹</a></h4><p>You need to build a <code>DestinationOptions</code> object and pass it as a parameter.
It defines how Destinations Service is queried.
In a simple application without provider/subscriber setup, your initial configuration is as simple as:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationOptions options = DestinationOptions.builder().build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="retrieval-strategy-options">Retrieval Strategy Options<a class="hash-link" href="#retrieval-strategy-options" title="Direct link to heading">â€‹</a></h5><p>For a provider/subscriber setup, a <a href="https://help.sap.com/doc/b579bf8578954412aea2b458e8452201/1.0/en-US/com/sap/cloud/sdk/cloudplatform/connectivity/ScpCfDestinationRetrievalStrategy.html" target="_blank" rel="noopener noreferrer">retrieval strategy</a> must be chosen according to your particular use case from:</p><ul><li><code>CURRENT_TENANT</code> (default, same behavior as the deprecated <code>ALWAYS_SUBSCRIBER</code>)</li><li><code>ALWAYS_PROVIDER</code></li><li><code>ONLY_SUBSCRIBER</code></li><li><code>SUBSCRIBER_THEN_PROVIDER</code></li></ul><p>Here is an example for <code>SUBSCRIBER_THEN_PROVIDER</code> option:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationOptions options =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DestinationOptions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .augmentBuilder(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ScpCfDestinationOptionsAugmenter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .augmenter()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .retrievalStrategy(ScpCfDestinationRetrievalStrategy.SUBSCRIBER_THEN_PROVIDER))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="token-exchange-options">Token Exchange Options<a class="hash-link" href="#token-exchange-options" title="Direct link to heading">â€‹</a></h5><p>Besides the retrieval strategy, the SAP Cloud SDK also offers a <a href="https://help.sap.com/doc/69f4a2d15d9b404fac06e968f0633d98/1.0/en-US/com/sap/cloud/sdk/cloudplatform/connectivity/ScpCfDestinationTokenExchangeStrategy.html" target="_blank" rel="noopener noreferrer">token exchange strategy</a> that lets you change the behavior when authentication requires a user token exchange.
There are three different options available:</p><ul><li><code>LOOKUP_THEN_EXCHANGE</code> (default)</li><li><code>LOOKUP_ONLY</code></li><li><code>EXCHANGE_ONLY</code></li></ul><p>By default, the SAP Cloud SDK first looks up the destination on the destination service and evaluates the authentication type.
If the authentication type requires a user token exchange the SAP Cloud SDK immediately performs that exchange.</p><p>If you know that the destination you are about to retrieve requires a user token exchange you can improve performance by skipping the initial &quot;look up&quot; request like so:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationOptions options =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DestinationOptions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .augmentBuilder(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ScpCfDestinationOptionsAugmenter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .augmenter()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .tokenExchangeStrategy(ScpCfDestinationTokenExchangeStrategy.EXCHANGE_ONLY))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Try&lt;Destination&gt; destination = DestinationAccessor.getLoader().tryGetDestination(&quot;MyDestination&quot;, options);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="configure-http-destinations-for-local-deployment">Configure HTTP Destinations for Local Deployment<a class="hash-link" href="#configure-http-destinations-for-local-deployment" title="Direct link to heading">â€‹</a></h2><p>When testing your app on localhost instead of SAP BTP, you require some configuration steps to make the destination retrieval work.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>HTTP Destinations</h5></div><div class="admonition-content"><p>This section refers to the maintenance of HTTP destinations.
Refer to the documentation about <a href="/cloud-sdk/docs/java/features/bapi-and-rfc/bapi-and-rfc-overview">BAPI/RFC communication</a> concerning the maintenance of RFC destinations for local deployment.</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Works for SAP Business Application Studio too</h5></div><div class="admonition-content"><p>The configuration procedures outlined here work too when you launch your app &quot;locally&quot; inside SAP Business Application Studio.
It does not matter that the app does not run on your own machine.</p></div></div><p>To better understand the configuration steps, we&#x27;ll outline shortly how destination retrieval works when running your app on SCP.
Thereafter, we&#x27;ll outline the configuration procedures in detail.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="background-destination-retrieval-on-sap-business-technology-platform">Background: Destination Retrieval on SAP Business Technology Platform<a class="hash-link" href="#background-destination-retrieval-on-sap-business-technology-platform" title="Direct link to heading">â€‹</a></h3><p>By default, the SAP Cloud SDK uses a set of so-called destination loaders in a given order when searching for a destination via the <code>DestinationAccessor</code> API:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DestinationAccessor.tryGetDestination(&quot;MyDestination&quot;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="environment-variable">Environment Variable<a class="hash-link" href="#environment-variable" title="Direct link to heading">â€‹</a></h4><p>The first destination loader attempts to find the requested destination in the environment variable <code>destinations</code>.
Here is an example value:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;HTTP&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MyDestination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;proxyType&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Internet&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This destination rocks!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;authentication&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BasicAuthentication&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://URL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;user&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;USER&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;password&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PASSWORD&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Multiple Destinations</h5></div><div class="admonition-content"><p>You can configure multiple destinations with that approach.
Note that the value of the environment variable is a JSON array, so you can add further entries into it.</p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>(Beta) AuthToken Forwarding</h5></div><div class="admonition-content"><p>Sometimes you might want to forward the value of the <code>Authorization</code> header on the current request directly to the target system.
For that you can add the property <code>&quot;forwardAuthToken&quot;: &quot;true&quot;</code> to your destination.
This will forward the header, without any additional changes, to the specified target system.</p></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="sap-business-technology-platform-destination-service">SAP Business Technology Platform Destination Service<a class="hash-link" href="#sap-business-technology-platform-destination-service" title="Direct link to heading">â€‹</a></h4><p>If the previous lookup was not successful, the next destination loaders examine the environment variable <code>VCAP_SERVICES</code> to see if the SAP BTP destination service is bound.
If so, the SAP Cloud SDK queries the SAP BTP destination service for the destination configuration per the requested destination name.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="sap-business-technology-platform-connectivity-service">SAP Business Technology Platform Connectivity Service<a class="hash-link" href="#sap-business-technology-platform-connectivity-service" title="Direct link to heading">â€‹</a></h4><p>In case the destination is of proxy type <code>OnPremise</code>, the SAP Cloud SDK performs an additional query to the SAP BTP connectivity service to obtain further proxy information and an authorization token.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="configuration-procedure-for-localhost">Configuration Procedure for Localhost<a class="hash-link" href="#configuration-procedure-for-localhost" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="destinations-with-proxy-type-internet">Destinations With Proxy Type <code>Internet</code><a class="hash-link" href="#destinations-with-proxy-type-internet" title="Direct link to heading">â€‹</a></h4><p>Maintain the destination configuration via the environment variable <code>destinations</code>.
See the example value above for reference.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="destinations-with-proxy-type-onpremise">Destinations With Proxy Type <code>OnPremise</code><a class="hash-link" href="#destinations-with-proxy-type-onpremise" title="Direct link to heading">â€‹</a></h4><p>To access the <strong>Destination</strong> and <strong>Connectivity</strong> service on SAP BTP we have to configure the SAP Cloud SDK accordingly.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Are your client and server located on the same Network?</h5></div><div class="admonition-content"><p>If your localhost (client) resides in the same network zone as the target system (server) you can access it directly.
Configuration of SAP BTP connectivity services is not needed.
All you have to do is creating a destination via environment variable <code>destinations</code>.</p></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="developing-in-business-application-studio">Developing in Business Application Studio<a class="hash-link" href="#developing-in-business-application-studio" title="Direct link to heading">â€‹</a></h5><p>If you are developing an application in the <strong>Business Application Studio (BAS)</strong>, and want to reach On-Premise systems, perform the following steps:</p><ol><li>Make sure your BAS instance is part of the same CF space as your Cloud Connector.</li><li>Add properties <code>WebIDEEnabled</code> and <code>HTML5.DynamicDestination</code> to your On-Premise destination with the value <code>true</code>.</li><li>In BAS, configure your <code>destinations</code> environment variable as follows:</li></ol><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;HTTP&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;DESTINATION-NAME&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://&lt;DESTINATION-NAME&gt;.dest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;ProxyHost&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;ProxyPort&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8887</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Please refer to <a href="/cloud-sdk/docs/js/guides/bas-external-system">the BAS connectivity guide</a> created for the SAP Cloud SDK for JavaScript to get more information and a detailed description of the technical background.
The information there also applies to the SAP Cloud SDK for Java.</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="maintain-vcap_services">Maintain <code>VCAP_SERVICES</code><a class="hash-link" href="#maintain-vcap_services" title="Direct link to heading">â€‹</a></h5><p>How to create the <code>VCAP_SERVICES</code> representation depends on whether the Cloud Application Programming (CAP) Model is used.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">CAP is used</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">CAP is not used</li></ul><div class="margin-vert--md"><div role="tabpanel" hidden=""><p>Create the <code>VCAP_SERVIES</code> environment variable on the shell or operating system level.
Copy the value of that environment variable from your app which is deployed to SCP.</p></div><div role="tabpanel"><p>Create the file <code>default-env.json</code> in your project&#x27;s root and supply the <code>VCAP_SERVICES</code> value you copied beforehand so that the file looks similar to the following shortened example:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;VCAP_SERVICES&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;connectivity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;label&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;connectivity&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lite&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-connectivity&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-connectivity&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;credentials&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;xsuaa&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;label&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xsuaa&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;space&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-xsuaa&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-xsuaa&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;credentials&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;destination&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;label&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;destination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;plan&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lite&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;instance_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-destination&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;credentials&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Furthermore, add the dependency <code>com.sap.cds:cds-integration-cloud-sdk</code> to your POM file:</p><div class="codeBlockContainer_I0IT language-xml theme-code-block"><div class="codeBlockContent_wNvx xml"><pre tabindex="0" class="prism-code language-xml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.sap.cds</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">cds-integration-cloud-sdk</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="skip-destination-creation-step-for-certain-authentication-types-on-cloud-foundry">Skip Destination Creation Step for Certain Authentication Types on Cloud Foundry<a class="hash-link" href="#skip-destination-creation-step-for-certain-authentication-types-on-cloud-foundry" title="Direct link to heading">â€‹</a></h4><p>For certain authentication types i.e. <code>NoAuthentication</code> and <code>OAuth2ClientCredentials</code> there is an API that eliminates the need to manually create a destination in the CF account for connecting to services.</p><p>Example:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">final Map&lt;String, String&gt; mapping =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ScpCfServiceDestinationLoader.buildClientCredentialsMapping(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;credentials.endpoints.service_rest_url&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;credentials.uaa.clientid&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;credentials.uaa.clientsecret&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;credentials.endpoints.token_url&quot;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The <code>ScpCfServiceDestinationLoader.buildClientCredentialsMapping</code> method creates a mapping for loading a destination and provides JSON paths for all required destination properties.</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">final HttpDestination destination =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ScpCfServiceDestinationLoader.getDestinationForService(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;label&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;serviceBindingName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AuthenticationType.OAUTH2_CLIENT_CREDENTIALS,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mapping);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>For certain services (only SAP BTP Workflow service for now), we provide further convenience that skips the need to provide the <code>mapping</code> explicitly.
Example:</p><div class="codeBlockContainer_I0IT language-java theme-code-block"><div class="codeBlockContent_wNvx java"><pre tabindex="0" class="prism-code language-java codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">final HttpDestination destination =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ScpCfServiceDestinationLoader.getDestinationForService(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ScpCfServiceDestinationLoader.CfServices.WORKFLOW,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;my-workflow&quot;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h5 class="anchor anchorWithStickyNavbar_mojV" id="enable-access-to-sap-business-technology-platform-connectivity-service">Enable Access to SAP Business Technology Platform Connectivity Service<a class="hash-link" href="#enable-access-to-sap-business-technology-platform-connectivity-service" title="Direct link to heading">â€‹</a></h5><p>The SAP BTP connectivity service builds the connection between SAP BTP and the On-premise network.
That is why it has strong built-in restrictions to allow it only to be called from within SCP.
If you call the connectivity service from your local machine, you will encounter a connection timeout.
We&#x27;ll therefore apply port forwarding via SSH to simulate that your localhost plays the cloud app.</p><ul><li>Deploy your app to the SAP BTP once.</li><li>Enable SSH access to your app container with the <code>cf</code> CLI:</li></ul><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">cf enable-ssh app-name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cf restart app-name</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>Inspect the value of the entry <code>connectivity</code> of your <code>VCAP_SERVICES</code> and take note of the values of the fields<ul><li><code>credentials.onpremise_proxy_port</code></li><li><code>credentials.onpremise_proxy_host</code></li></ul></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>We&#x27;ll refer to these values as <em>proxy-port</em> and <em>proxy-host</em> hereafter.</p></div></div><ul><li>Create an SSH session to your app container with the following command and let the session opened:</li></ul><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">cf </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> app-name -L proxy-port:proxy-host:proxy-port</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>Replace the value of the field <code>VCAP_SERVICES.connectivity.credentials.onpremise_proxy_host</code> in your <code>default-env.json</code>
with <code>localhost</code>.</li></ul><div class="admonition admonition-success alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Ready</h5></div><div class="admonition-content"><p>Now your local setup is ready to consume an On-premise HTTP destination.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SAP/cloud-sdk/edit/main/docs/java/features/connectivity/destinations.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-03-04T10:07:42.000Z">3/4/2022</time></b> by <b>dependabot[bot]</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cloud-sdk/docs/java/features/bapi-and-rfc/bapi-and-rfc-overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">BAPI/RFC</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-http-client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">HttpClient</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#accessing-destinations" class="table-of-contents__link toc-highlight">Accessing Destinations</a></li><li><a href="#supported-authentication-flows" class="table-of-contents__link toc-highlight">Supported Authentication Flows</a><ul><li><a href="#integrated-multi-tenancy" class="table-of-contents__link toc-highlight">Integrated Multi-Tenancy</a></li><li><a href="#using-the-samlassertion-authentication-type" class="table-of-contents__link toc-highlight">Using the SAMLAssertion Authentication Type</a></li></ul></li><li><a href="#supported-proxy-types" class="table-of-contents__link toc-highlight">Supported Proxy Types</a></li><li><a href="#decorating-destinations" class="table-of-contents__link toc-highlight">Decorating Destinations</a><ul><li><a href="#http-destinations" class="table-of-contents__link toc-highlight">HTTP Destinations</a></li><li><a href="#bapi-destinations" class="table-of-contents__link toc-highlight">BAPI Destinations</a></li><li><a href="#connect-to-sap-s4hana-on-premise" class="table-of-contents__link toc-highlight">Connect to SAP S/4HANA On-Premise</a></li></ul></li><li><a href="#registering-destinations-at-runtime" class="table-of-contents__link toc-highlight">Registering Destinations at Runtime</a><ul><li><a href="#mocking-destinations-for-testing" class="table-of-contents__link toc-highlight">Mocking Destinations for Testing</a></li><li><a href="#using-custom-destination-loaders" class="table-of-contents__link toc-highlight">Using Custom Destination Loaders</a></li></ul></li><li><a href="#provide-headers-for-destinations" class="table-of-contents__link toc-highlight">Provide Headers for Destinations</a><ul><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#implement-own-header-provider" class="table-of-contents__link toc-highlight">Implement Own Header Provider</a></li><li><a href="#add-headers-via-destination-properties" class="table-of-contents__link toc-highlight">Add Headers via Destination Properties</a></li></ul></li><li><a href="#provide-query-parameters-for-destinations" class="table-of-contents__link toc-highlight">Provide Query Parameters for Destinations</a><ul><li><a href="#how-it-works-1" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#add-query-parameters-via-destination-properties" class="table-of-contents__link toc-highlight">Add Query Parameters via Destination Properties</a></li></ul></li><li><a href="#retrieving-destinations" class="table-of-contents__link toc-highlight">Retrieving Destinations</a><ul><li><a href="#get-all-destinations-from-the-destination-service-on-cloud-foundry" class="table-of-contents__link toc-highlight">Get All Destinations From the Destination Service on Cloud Foundry</a></li></ul></li><li><a href="#configure-http-destinations-for-local-deployment" class="table-of-contents__link toc-highlight">Configure HTTP Destinations for Local Deployment</a><ul><li><a href="#background-destination-retrieval-on-sap-business-technology-platform" class="table-of-contents__link toc-highlight">Background: Destination Retrieval on SAP Business Technology Platform</a></li><li><a href="#configuration-procedure-for-localhost" class="table-of-contents__link toc-highlight">Configuration Procedure for Localhost</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/overview/overview-cloud-sdk">SAP Cloud SDK overview</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/java/getting-started">SAP Cloud SDK for Java</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/js/getting-started">SAP Cloud SDK for JS</a></li><li class="footer__item"><a href="https://developers.sap.com/tutorial-navigator.html?tag=products:technology-platform/sap-cloud-sdk/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>SAP Cloud SDK Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Additional Resources</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://developers.sap.com/topics/cloud-sdk.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>SAP Developers Portal<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://community.sap.com/topics/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>SAP Cloud SDK Community Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://help.sap.com/viewer/product/SAP_CLOUD_SDK/1.0/en-US?task=discover_task" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>SAP Cloud SDK on SAP Help<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Package Repositories</div><ul class="footer__items"><li class="footer__item"><a href="https://www.npmjs.com/search?q=%40sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>SAP Cloud SDK for JavaScript<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.npmjs.com/search?q=%40sap%2Fcloud-sdk-vdm-*" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Typescript client libraries for SAP S/4HANA<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://search.maven.org/search?q=g:com.sap.cloud.sdk*" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>SAP Cloud SDK for Java<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 SAP SE or an SAP affiliate company. All rights reserved.</div></div></div></footer></div>
<script src="/cloud-sdk/assets/js/runtime~main.33fcc8c4.js"></script>
<script src="/cloud-sdk/assets/js/main.21a68261.js"></script>
</body>
</html>